var t,n=/*#__PURE__*/function(){function t(){}return t.encode=function(t){return window.btoa(t)},t.decode=function(t){return window.atob(t)},t.isHTML=function(t){var n=RegExp.prototype.test.bind(/(<([^>]+)>)/i);return t.match(n)},t.wrapString=function(t,n){return this.isHTML(t)?t:"<"+n+">"+t+"</"+n+">"},t.deepEqual=function(t,n){var e=this,o=Object.keys,i=typeof t;return t&&n&&"object"===i&&i===typeof n?o(t).length===o(n).length&&o(t).every(function(o){return e.deepEqual(t[o],n[o])}):t===n},t.compareObjects=function(t,n){var e=function t(n){return Object.entries(n).sort().map(function(n){return n[1]instanceof Object&&(n[1]=t(n[1])),n})};return JSON.stringify(e(t))===JSON.stringify(e(n))},t.objectEquals=function(t,n){var e=function(t){var n={};return JSON.stringify(t,function(t,e){return n[t]=null,e}),JSON.stringify(t,Object.keys(n).sort())};return e(t)===e(n)},t.prepareObjectsForComparison=function(t,n){var e=JSON.parse(JSON.stringify(t)),o=JSON.parse(JSON.stringify(n));return e.forEach(function(t){t.checked=!0}),o.forEach(function(t){t.checked=!0}),{A:e,B:o}},t.mergeRecursively=function(t,n){for(var e in n)try{t[e]=n[e].constructor==Object?this.mergeRecursively(t[e],n[e]):n[e]}catch(o){t[e]=n[e]}return t},t}(),e=/*#__PURE__*/function(){function t(t,n){this.options=void 0,this.banner=void 0,this.cookiesManager=void 0,this.cookiesManager=t,this.options=n,this.injectBanner(),this.setEventListeners()}var e=t.prototype;return e.setEventListeners=function(){var t=this;document.querySelector(".banner-container__accept-all-btn").addEventListener("click",function(){t.cookiesManager.acceptAllButton()}),document.querySelector(".banner-container__config-btn").addEventListener("click",function(){t.cookiesManager.showModal()})},e.generateBanner=function(){return'\n                <div class="c-cookies-config-banner">\n                    <div class="banner-container">\n                        '+this.getBannerText()+'\n                    <div class="banner-container__buttons">\n                       '+this.getAcceptAllButton()+"\n                       "+this.getSettingsButton()+"\n                    </div>\n                    </div>\n                </div> \n                "},e.getAcceptAllButton=function(){return this.options.acceptAllButton.show?'<button class="banner-container__button banner-container__accept-all-btn">'+this.options.acceptAllButton.text+"</button>":""},e.getSettingsButton=function(){return this.options.settingsButton.show?'<button class="banner-container__button-link banner-container__config-btn">'+this.options.settingsButton.text+"</button>":""},e.getBannerText=function(){return n.wrapString(this.options.bannerText,"p")},e.injectBanner=function(){null!=document.querySelector("body")&&document.querySelector("body").insertAdjacentHTML("afterend",this.generateBanner())},e.showWall=function(){var t='<div class="c-cookies-config-wall '+(this.options.wallBlur?"c-cookies-config-wall--blurred":"")+'"></div>';document.querySelector("body").insertAdjacentHTML("afterend",t)},e.hideWall=function(){document.querySelector(".c-cookies-config-wall").style.display="none"},e.hideScroll=function(){document.querySelector("body").style.overflow="hidden"},e.showScroll=function(){document.querySelector("body").style.overflow="auto"},e.show=function(){this.options.wall&&this.showWall(),this.options.wallScroll||this.hideScroll(),document.querySelector(".c-cookies-config-banner .banner-container").classList.add("show-banner")},e.hide=function(){document.querySelector(".c-cookies-config-banner").style.display="none",this.hideWall(),this.showScroll()},t}(),o=/*#__PURE__*/function(){function t(t,n){this.options=void 0,this.cookiesManager=void 0,this.cookiesManager=t,this.options=n,this.injectModal(),this.setEventListeners()}var n=t.prototype;return n.show=function(){document.getElementById("modal-container").classList.add("show-modal"),document.querySelector("body").style.overflow="hidden"},n.hide=function(){document.getElementById("modal-container").classList.remove("show-modal")},n.setEventListeners=function(){var t=this,n=this;document.querySelectorAll(".close-modal").forEach(function(n){return n.addEventListener("click",t.hide)}),document.querySelectorAll(".modal__button-accept-all").forEach(function(t){t.addEventListener("click",function(){n.cookiesManager.acceptAllButton()})}),document.querySelectorAll(".modal__button-save-btn").forEach(function(t){t.addEventListener("click",function(){n.cookiesManager.injectScripts(),n.cookiesManager.hideBanner(),n.cookiesManager.saveButton()})}),this.cookiesManager.getOptions().cookieCategories.forEach(function(t,n){document.querySelector(".cm-switch-"+n).addEventListener("change",function(){t.checked=!!this.checked})})},n.injectModal=function(){null!=document.querySelector("body")&&document.querySelector("body").insertAdjacentHTML("afterend",this.generateModal())},n.generateCategoriesBlocks=function(){var t="";return this.cookiesManager.getOptions().cookieCategories.forEach(function(n,e){var o=n.required?"disabled":"";t+='\n            <div class="cookie-category">\n                <div class="cookie-category__header header">\n                    <h2 class="header__title">\n                    '+n.title+'\n                    </h2>\n                    <div class="header__switch">\n                    <label class="switch '+o+'">\n                        <input '+o+' checked class="cm-switch-'+e+'" type="checkbox">\n                        <span class="slider round"></span>\n                    </label>\n                    </div>\n                </div>\n            <div class="cookie-category__body body">\n                <p>'+n.description+"</p>\n            </div>\n            </div>\n            "}),t},n.generateModal=function(){return'\n        <div class="c-cookies-config-modal">\n        <div class="modal__container" id="modal-container">\n          <div class="modal__content">\n            <div class="modal__close close-modal" title="Close">\n                <div class="close-modal-img"></div>\n            </div>\n        \n            <h1 class="modal__title">Configuración de cookies</h1>\n            <p class="modal__description">Configura aquí tus cookies.</p>\n            <div class="modal__cookie-categories">\n                '+this.generateCategoriesBlocks()+'\n            </div>\n    \n            <div class="modal__footer">\n              <button class="modal__button modal__button-width modal__button-accept-all">\n                Aceptar todas\n              </button>\n    \n              <button class="modal__button-link close-modal modal__button-save-btn">\n                Guardar\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n        '},t}(),i=/*#__PURE__*/function(){var i=c.prototype;function c(t){if(this.modalOptions=void 0,this.banner=void 0,this.modal=void 0,this.acceptAll=!1,this.configChanged=!1,null==t)throw new Error("Options cannot be null");if(t.cookieCategories.forEach(function(t){t.checked=!0}),t=n.mergeRecursively(this.getDefaults(),t),this.modalOptions=t,null!=localStorage.getItem("cookiesManagerOptions")){var e=n.prepareObjectsForComparison(this.modalOptions.cookieCategories,this.getCookiesOptions());n.objectEquals(e.A,e.B)?(this.modalOptions.cookieCategories=this.getCookiesOptions(),this.injectScripts()):this.configChanged=!0}null!=t.modalOptions&&this.createModal(t.modalOptions),null!=t.bannerOptions&&this.createBanner(t.bannerOptions)}return i.getBanner=function(){return this.banner},i.setBanner=function(t){this.banner=t},i.getModal=function(){return this.modal},i.setModal=function(t){this.modal=t},i.getOptions=function(){return this.modalOptions},i.createBanner=function(t){return this.banner=new e(this,t),this.banner},i.createModal=function(t){return this.modal=new o(this,t),this.modal},i.acceptAllButton=function(){this.acceptAll=!0,this.modal.hide(),this.banner.hide(),this.injectScripts(),this.saveCookieOptions()},i.showModal=function(){this.modal.show()},i.showBanner=function(){this.banner.show()},i.hideBanner=function(){this.banner.hide()},i.hideModal=function(){this.modal.hide()},i.injectScript=function(t,n){var e=document.createElement("script");e.setAttribute("src",t),e.async=n,document.body.appendChild(e)},i.injectGTM=function(t){try{!function(t,n,e,o,i){t[o]=t[o]||[],t[o].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var c=n.getElementsByTagName(e)[0],s=n.createElement(e);s.src="https://www.googletagmanager.com/gtm.js?id="+i,c.parentNode.insertBefore(s,c)}(window,document,"script","dataLayer",t),window.dataLayer=window.dataLayer||[]}catch(t){console.log("There was an error loading GTM.")}},i.init=function(t,n){this.modalOptions.askOnce?(null==localStorage.getItem("cookiesManagerOptions")||this.modalOptions.askOnChange&&this.configChanged)&&(t&&this.showBanner(),n&&this.showModal()):(t&&this.showBanner(),n&&this.showModal())},i.injectScripts=function(){var n=this;this.modalOptions.cookieCategories.forEach(function(e){(e.checked||n.acceptAll)&&e.scripts.forEach(function(e){e.type==t.STANDARD||null==e.type?n.injectScript(e.scriptSrc,e.async):n.injectGTM(e.gtmCode)})})},i.saveButton=function(){this.saveCookieOptions()},i.saveCookieOptions=function(){var t=n.encode(JSON.stringify(this.modalOptions.cookieCategories));localStorage.setItem("cookiesManagerOptions",t)},i.getCookiesOptions=function(){return JSON.parse(n.decode(localStorage.getItem("cookiesManagerOptions")))},i.getDefaults=function(){return{askOnce:!0,askOnChange:!0,modalOptions:{acceptAllButton:{text:"Accept all",show:!0},saveButton:{text:"Settings",show:!0},closeButton:{text:"Settings",show:!0}},bannerOptions:{wall:!0,wallScroll:!1,wallBlur:!0,bannerText:"This website uses cookies to ensure you get the best experience on our website.",acceptAllButton:{text:"Accept all",show:!0},settingsButton:{text:"Settings",show:!0},acceptRequiredOnlyButton:{text:"Configuración",show:!1},rejectAllButton:{text:"Configuración",show:!1}},cookieCategories:[]}},c}();!function(t){t[t.GTM=0]="GTM",t[t.STANDARD=1]="STANDARD"}(t||(t={}));export{i as CookiesManager,t as ScriptType};
//# sourceMappingURL=index.esm.mjs.map
