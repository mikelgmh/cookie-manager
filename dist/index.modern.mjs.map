{"version":3,"file":"index.modern.mjs","sources":["../src/utils.ts","../src/Banner.ts","../src/Modal.ts","../src/CookiesManager.ts"],"sourcesContent":["\nexport class Utils {\n    public static encode(str) {\n        return window.btoa(str);\n    }\n    public static decode(a) {\n        return window.atob(a);\n    }\n    private static isHTML(str: string) {\n        var isHTML = RegExp.prototype.test.bind(/(<([^>]+)>)/i);\n\n        // test isHTML regex\n        return str.match(isHTML);\n\n    }\n    public static wrapString(str: string, tag: string) {\n        if (this.isHTML(str)) {\n            return str;\n        }\n        return `<${tag}>${str}</${tag}>`;\n    }\n\n    public static deepEqual(x, y) {\n        const ok = Object.keys, tx = typeof x, ty = typeof y;\n        return x && y && tx === 'object' && tx === ty ? (\n            ok(x).length === ok(y).length &&\n            ok(x).every(key => this.deepEqual(x[key], y[key]))\n        ) : (x === y);\n    }\n\n    public static compareObjects(a, b) {\n        let s = (o) => Object.entries(o).sort().map(i => {\n            if (i[1] instanceof Object) i[1] = s(i[1]);\n            return i\n        })\n        return JSON.stringify(s(a)) === JSON.stringify(s(b))\n    }\n\n    public static objectEquals(obj1, obj2) {\n        const JSONstringifyOrder = obj => {\n            const keys = {};\n            JSON.stringify(obj, (key, value) => {\n                keys[key] = null;\n                return value;\n            });\n            return JSON.stringify(obj, Object.keys(keys).sort());\n        };\n        return JSONstringifyOrder(obj1) === JSONstringifyOrder(obj2);\n    }\n\n    public static prepareObjectsForComparison(obj1, obj2) {\n        var A = JSON.parse(JSON.stringify(obj1));\n        var B = JSON.parse(JSON.stringify(obj2));\n\n\n        A.forEach(element => {\n            element.checked = true;\n        });\n        B.forEach(element => {\n            element.checked = true;\n        });\n        return { A, B }\n    }\n\n    public static mergeRecursively(obj1, obj2) {\n        for (var p in obj2) {\n            try {\n                // Property in destination object set; update its value.\n                if (obj2[p].constructor == Object) {\n                    obj1[p] = this.mergeRecursively(obj1[p], obj2[p]);\n                } else {\n                    obj1[p] = obj2[p];\n                }\n            } catch (e) {\n                // Property in destination object not set; create it and set its value.\n                obj1[p] = obj2[p];\n            }\n        }\n        return obj1;\n    }\n}","import { Modal } from \"./Modal\";\nimport { Utils } from './utils';\nimport { CookiesManager } from './CookiesManager';\n\nexport class Banner {\n    private options: BannerOptions;\n    private banner: string;\n    private cookiesManager: CookiesManager;\n\n    constructor(cookiesManager: CookiesManager, options: BannerOptions) {\n        this.cookiesManager = cookiesManager;\n        this.options = options;\n        if (cookiesManager.getOptions().bannerOptions.inject) {\n            this.injectBanner();\n        }\n        this.setEventListeners();\n    }\n\n    public setEventListeners() {\n        let self = this;\n        // Accept all button\n        document.querySelector(\".cm-banner-accept-all-btn\")!.addEventListener(\"click\", function () {\n            self.cookiesManager.acceptAllButton();\n        });\n\n        // Config button\n        document.querySelector(\".cm-banner-config-btn\")!.addEventListener(\"click\", function () {\n            self.cookiesManager.showModal();\n        });\n\n    }\n\n\n\n\n    private generateBanner() {\n        return `\n                <div class=\"c-cookies-config-banner\">\n                    <div class=\"banner-container\">\n                        ${this.getBannerText()}\n                        <div class=\"banner-container__buttons\">\n                            ${this.getAcceptAllButton()}\n                            ${this.getSettingsButton()}\n                        </div>\n                    </div>\n                </div> \n                `;\n    }\n\n    getAcceptAllButton() {\n        return this.options.acceptAllButton.show ? `<button class=\"banner-container__button banner-container__accept-all-btn cm-banner-accept-all-btn\">${this.options.acceptAllButton.text}</button>` : \"\";\n    }\n    getSettingsButton() {\n        return this.options.settingsButton.show ? `<button class=\"banner-container__button-link banner-container__config-btn cm-banner-config-btn\">${this.options.settingsButton.text}</button>` : \"\";\n    }\n\n    private getBannerText() {\n        return Utils.wrapString(this.options.bannerText, \"p\");\n    }\n\n    public injectBanner() {\n        if (document.querySelector(\"body\") != null) {\n            document.querySelector(\"body\")!.insertAdjacentHTML(\"afterend\", this.generateWall());\n            document.querySelector(\"body\")!.insertAdjacentHTML(\"afterend\", this.generateBanner());\n        }\n    }\n\n    private generateWall(){\n        const blur = this.options.wallBlur ? \"c-cookies-config-wall--blurred\" : \"\";\n        return `<div class=\"c-cookies-config-wall ${blur}\"></div>`;\n    }\n\n    public showWall() {\n        document.querySelector<HTMLElement>(\".c-cookies-config-wall\")!.classList.add(\"wall-show\");\n    }\n\n    public hideWall() {\n        document.querySelector<HTMLElement>(\".c-cookies-config-wall\")!.classList.remove(\"wall-show\");\n    }\n\n    public hideScroll() {\n        document.querySelector(\"body\")!.style.overflow = \"hidden\";\n    }\n\n    public showScroll() {\n        document.querySelector(\"body\")!.style.overflow = \"auto\";\n    }\n\n    public show() {\n        //document.querySelector<HTMLElement>(\".c-cookies-config-banner\")!.style(\"display\", \"blockxÂº\");\n        if (this.options.wall) {\n            this.showWall();\n        }\n        if (!this.options.wallScroll) {\n            this.hideScroll();\n        }\n        document.querySelector<HTMLElement>(\".c-cookies-config-banner .banner-container\")!.classList.add(\"show-banner\");\n    }\n    public hide() {\n        document.querySelector<HTMLElement>(\".c-cookies-config-banner\")!.style.display = \"none\";\n        this.hideWall();\n        this.showScroll();\n        // document.querySelector(\".c-cookies-config-banner\")!.style(\"display\", \"none\");\n        // Array.from(document.querySelector(\".c-cookies-config-banner\") as unknown as HTMLCollectionOf<HTMLElement>);\n    }\n\n}\n\n\n\n\nexport interface BannerOptions {\n    bannerText: string;\n    wall: boolean,\n    wallScroll: boolean,\n    wallBlur: boolean,\n    inject: boolean,\n    acceptAllButton: {\n        text: string,\n        show: boolean,\n    },\n    settingsButton: {\n        text: string,\n        show: boolean,\n    },\n    acceptRequiredOnlyButton: {\n        text: string,\n        show: boolean,\n    },\n    rejectAllButton: {\n        text: string,\n        show: boolean,\n    },\n}\n","import { CookiesManager } from './CookiesManager';\nexport class Modal {\n\n    private options: ModalOptions;\n    private cookiesManager: CookiesManager;\n\n    constructor(cookiesManager: CookiesManager, options: ModalOptions) {\n        this.cookiesManager = cookiesManager;\n        this.options = options;\n        if (cookiesManager.getOptions().modalOptions.inject) {\n            this.injectModal();\n        }\n        this.setEventListeners();\n    }\n\n\n    show() {\n        const modalContainer = document.getElementById(\"modal-container\");\n        modalContainer!.classList.add('show-modal');\n        // Hide body scroll\n        document.querySelector(\"body\")!.style.overflow = \"hidden\";\n    }\n    hide() {\n        const modalContainer = document.getElementById('modal-container')\n        modalContainer!.classList.remove('show-modal')\n\n    }\n\n    setEventListeners() {\n\n        var self = this;\n        // Modal close button\n        const closeBtn = document.querySelectorAll('.close-modal')\n        closeBtn.forEach(c => c.addEventListener('click', this.hide))\n\n        // Accept all button\n        const acceptAllBtn = document.querySelector('.cm-modal-accept-all')!;\n        acceptAllBtn.addEventListener('click', function () {\n            self.cookiesManager.acceptAllButton();\n        });\n\n        // Save button\n        const saveButton = document.querySelector('.cm-modal-save')!;\n        saveButton.addEventListener('click', function () {\n            self.cookiesManager.injectScripts();\n            self.cookiesManager.hideBanner();\n            self.cookiesManager.saveButton();\n        });\n\n        // Switches\n        this.cookiesManager.getOptions().cookieCategories.forEach((category, index) => {\n            var checkbox = document.querySelector(`.cm-switch-${index}`)!;\n            checkbox.addEventListener('change', function () {\n                if (this.checked) {\n                    category.checked = true;\n                } else {\n                    category.checked = false;\n                }\n            });\n        });\n    }\n\n    public injectModal() {\n        if (document.querySelector(\"body\") != null) {\n            document.querySelector(\"body\")!.insertAdjacentHTML(\"afterend\", this.generateModal());\n        }\n    }\n\n    private generateCategoriesBlocks() {\n        let categoriesBlocks = \"\";\n        this.cookiesManager.getOptions().cookieCategories.forEach((element, index) => {\n            const disabled = element.required ? \"disabled\" : \"\";\n            const checked = element.required ? \"checked\" : \"\";\n            const block = `\n            <div class=\"cookie-category\">\n                <div class=\"cookie-category__header header\">\n                    <h2 class=\"header__title\">\n                        ${element.title}\n                    </h2>\n                    <div class=\"header__switch\">\n                    <label class=\"switch ${disabled}\">\n                        <input ${disabled} checked class=\"cm-switch-${index}\" type=\"checkbox\">\n                        <span class=\"slider round\"></span>\n                    </label>\n                    </div>\n                </div>\n            <div class=\"cookie-category__body body\">\n                <p>${element.description}</p>\n            </div>\n            </div>\n            `;\n            categoriesBlocks += block;\n        });\n        return categoriesBlocks;\n\n    }\n\n    getCloseButton() {\n        return this.options.closeButton.show ? `<div class=\"modal__close close-modal\" title=\"Close\"><div class=\"close-modal-img\"></div></div>` : \"\";\n    }\n    getAcceptAllButton() {\n        return this.options.acceptAllButton.show ? `<button class=\"modal__button modal__button-width cm-modal-accept-all modal__button-accept-all\">${this.options.acceptAllButton.text }</button>` : \"\";\n    }\n    getSaveButton() {\n        return this.options.saveButton.show ? ` <button class=\"modal__button-link close-modal cm-modal-save modal__button-save-btn\"> ${this.options.saveButton.text } </button>` : \"\";\n    }\n\n    generateModal() {\n        return `\n        <div class=\"c-cookies-config-modal\">\n        <div class=\"modal__container\" id=\"modal-container\">\n          <div class=\"modal__content\">\n            ${this.getCloseButton()}\n            <h1 class=\"modal__title\">${this.options.title}</h1>\n            <p class=\"modal__description\">${this.options.description}</p>\n            <div class=\"modal__cookie-categories\">\n                ${this.generateCategoriesBlocks()}\n            </div>\n    \n            <div class=\"modal__footer\">\n             ${this.getAcceptAllButton()}\n             ${this.getSaveButton()}\n            </div>\n          </div>\n        </div>\n      </div>\n        `;\n    }\n\n}\n\nexport interface ModalOptions {\n    inject: boolean,\n    title: string,\n    description: string,\n    acceptAllButton: {\n        text: string,\n        show: boolean,\n    },\n    saveButton: {\n        text: string,\n        show: boolean,\n    },\n    closeButton: {\n        text: string,\n        show: boolean,\n    },\n}","\nimport { Banner, BannerOptions } from \"./Banner\";\nimport { ModalOptions, Modal } from './Modal';\nimport \"./scss/styles.scss\";\nimport { Utils } from './utils';\nexport class CookiesManager {\n\n    // var isHTML = RegExp.prototype.test.bind(/(<([^>]+)>)/i);\n    private modalOptions: Options;\n    private banner: Banner;\n    private modal: Modal;\n    private acceptAll: boolean = false;\n    private configChanged: boolean = false;\n\n\n    public getBanner(): Banner {\n        return this.banner;\n    }\n\n    public setBanner(banner: Banner): void {\n        this.banner = banner;\n    }\n\n    public getModal(): Modal {\n        return this.modal;\n    }\n\n    public setModal(modal: Modal): void {\n        this.modal = modal;\n    }\n\n    public getOptions(): Options {\n        return this.modalOptions;\n    }\n\n    constructor(options: Options) {\n        if (options == null) {\n            throw new Error(\"Options cannot be null\");\n        } else {\n            if (options.cookieCategories == null) {\n                throw new Error(\"You should provide at least one cookie category\");\n            }\n            // Set all cookie categories as checked by default\n            options.cookieCategories.forEach(category => {\n                category.checked = true;\n            });\n\n            // Merge the default options with user options\n            options = Utils.mergeRecursively(this.getDefaultOptions(), options);\n            this.modalOptions = options;\n\n            if (localStorage.getItem(\"cookiesManagerOptions\") != null) { // If there's already configuration saved\n                // Prepare the options to compare them.\n                var optionsComparison = Utils.prepareObjectsForComparison(this.modalOptions.cookieCategories, this.getCookiesOptions());\n\n                // Check if the options in localStorage and the options from the constructor are the same\n                if (Utils.objectEquals(optionsComparison.A, optionsComparison.B)) {\n                    // If the options are the same, just inject the scripts\n                    this.modalOptions.cookieCategories = this.getCookiesOptions();\n                    this.injectScripts();\n                } else {\n                    // If the options are different, set the configChanged to true\n                    // We are in the constructor. By setting this to true, it might show the banner and modal if the user has set askOnChange to true\n                    this.configChanged = true;\n                }\n            }\n\n            // Generate modal\n            if (options.modalOptions != null) {\n\n                this.createModal(options.modalOptions);\n\n            }\n\n            if (options.bannerOptions != null) {\n                this.createBanner(options.bannerOptions);\n\n            }\n        }\n\n    }\n\n    public setEventListeners() {\n        this.modal.setEventListeners();\n        this.banner.setEventListeners();\n\n    }\n\n    public createBanner(options: BannerOptions) {\n        this.banner = new Banner(this, options);\n        return this.banner;\n    }\n    public createModal(options: ModalOptions) {\n        this.modal = new Modal(this, options);\n        return this.modal;\n    }\n\n    public acceptAllButton() {\n        this.acceptAll = true;\n        this.modal.hide();\n        this.banner.hide();\n        this.injectScripts();\n        //this.setCookie();\n        this.saveCookieOptions();\n    }\n\n    public showModal() {\n        this.modal.show();\n    }\n\n    public showBanner() {\n        this.banner.show();\n    }\n\n    public hideBanner() {\n        this.banner.hide();\n    }\n\n    public hideModal() {\n        this.modal.hide();\n    }\n\n    private injectScript(src: string, async = false) {\n        var s = document.createElement('script');\n        s.setAttribute('src', src);\n        s.async = async;\n        document.body.appendChild(s);\n    }\n\n    private injectGTM(gtmCode: string) {\n        try {\n            (function (w, d, s, l, i) {\n                w[l] = w[l] || [];\n                w[l].push({\n                    'gtm.start': new Date().getTime(),\n                    event: 'gtm.js',\n                });\n                const f = d.getElementsByTagName(s)[0];\n                const j = d.createElement(s) as HTMLInputElement;\n                const\n                    dl = l != 'dataLayer' ? `&l=${l}` : '';\n                //j.async = true;\n                j.src = `https://www.googletagmanager.com/gtm.js?id=${i}${dl}`;\n                f.parentNode!.insertBefore(j, f);\n            }(window, document, 'script', 'dataLayer', gtmCode));\n            (window as any).dataLayer = (window as any).dataLayer || [];\n        } catch (error) {\n            console.log(\"There was an error loading GTM.\")\n        }\n    }\n\n    public init(banner: boolean, modal: boolean) {\n        if (this.modalOptions.askOnce) {\n            if (localStorage.getItem(\"cookiesManagerOptions\") == null || this.configChanged) {\n                if (banner) {\n                    this.showBanner();\n                }\n                if (modal) {\n                    this.showModal();\n                }\n            } // There's no else, as if cookiesManagerOptions was not null, the constructor would do the job.\n        } else {\n            if (banner) {\n                this.showBanner();\n            }\n            if (modal) {\n                this.showModal();\n            }\n        }\n    }\n\n    public injectScripts() {\n        this.modalOptions.cookieCategories.forEach(category => {\n            if (category.checked || this.acceptAll) {\n                category.scripts.forEach(script => {\n                    if (script.type == ScriptType.STANDARD || script.type == null) {\n                        if (script.scriptSrc != null) {\n                            this.injectScript(script.scriptSrc, script.async)\n                        } else {\n                            throw new Error(\"You should provide a scriptSrc for the script\");\n                        }\n                    } else {\n                        if (script.gtmCode != null) {\n                            this.injectGTM(script.gtmCode);\n                        } else {\n                            throw new Error(\"You should provide a gtmCode for the script\");\n                        }\n                    }\n                });\n            }\n        });\n    }\n\n    saveButton() {\n        this.saveCookieOptions();\n    }\n\n    saveCookieOptions() {\n        const base64Options = Utils.encode(JSON.stringify(this.modalOptions.cookieCategories));\n        localStorage.setItem(\"cookiesManagerOptions\", base64Options);\n    }\n\n    getCookiesOptions(): any {\n        return JSON.parse(Utils.decode(localStorage.getItem(\"cookiesManagerOptions\")));\n    }\n\n    private getDefaultOptions(): Options {\n        return {\n            askOnce: true,\n            askOnChange: true,\n            modalOptions: {\n                title: \"Cookie settings\",\n                description: \"Change the settings for the cookies here.\",\n                inject: true,\n                acceptAllButton: {\n                    text: 'Accept all',\n                    show: true,\n                },\n                saveButton: {\n                    text: 'Save',\n                    show: true,\n                },\n                closeButton: {\n                    text: 'Close',\n                    show: true,\n                },\n            },\n            bannerOptions: {\n                inject: true,\n                wall: true,\n                wallScroll: false,\n                wallBlur: true,\n                bannerText: 'This website uses cookies to ensure you get the best experience on our website.',\n                acceptAllButton: {\n                    text: 'Accept all',\n                    show: true,\n                },\n                settingsButton: {\n                    text: 'Settings',\n                    show: true,\n                },\n                acceptRequiredOnlyButton: {\n                    text: 'ConfiguraciÃ³n',\n                    show: false,\n                },\n                rejectAllButton: {\n                    text: 'ConfiguraciÃ³n',\n                    show: false,\n                }\n            },\n            cookieCategories: [],\n        }\n    }\n\n\n\n}\n\nexport interface Options {\n    cookieCategories: Array<CookieCategory>,\n    bannerOptions: BannerOptions,\n    modalOptions: ModalOptions,\n    askOnce: boolean,\n    askOnChange: boolean,\n}\n\nexport interface CookieCategory {\n    title: string,\n    description: string,\n    required: boolean,\n    checked: boolean,\n    scripts: [\n        {\n            type: ScriptType,\n            gtmCode: string,\n            scriptSrc: string,\n            async: boolean,\n        }\n    ]\n}\n\nexport enum ScriptType {\n    GTM,\n    STANDARD\n}"],"names":["Utils","static","str","window","btoa","a","atob","isHTML","RegExp","prototype","test","bind","match","tag","this","x","y","ok","Object","keys","tx","length","every","key","deepEqual","b","s","o","entries","sort","map","i","JSON","stringify","obj1","obj2","JSONstringifyOrder","obj","value","A","parse","B","forEach","element","checked","p","constructor","mergeRecursively","e","Banner","cookiesManager","options","banner","getOptions","bannerOptions","inject","injectBanner","setEventListeners","self","document","querySelector","addEventListener","acceptAllButton","showModal","generateBanner","getBannerText","getAcceptAllButton","getSettingsButton","show","text","settingsButton","wrapString","bannerText","insertAdjacentHTML","generateWall","wallBlur","showWall","classList","add","hideWall","remove","hideScroll","style","overflow","showScroll","wall","wallScroll","hide","display","Modal","modalOptions","injectModal","getElementById","querySelectorAll","c","injectScripts","hideBanner","saveButton","cookieCategories","category","index","generateModal","generateCategoriesBlocks","categoriesBlocks","disabled","required","title","description","getCloseButton","closeButton","getSaveButton","CookiesManager","getBanner","setBanner","getModal","modal","setModal","acceptAll","configChanged","Error","getDefaultOptions","localStorage","getItem","optionsComparison","prepareObjectsForComparison","getCookiesOptions","objectEquals","createModal","createBanner","saveCookieOptions","showBanner","hideModal","injectScript","src","async","createElement","setAttribute","body","appendChild","injectGTM","gtmCode","w","d","l","push","Date","getTime","event","f","getElementsByTagName","j","parentNode","insertBefore","dataLayer","error","console","log","init","askOnce","scripts","script","type","ScriptType","STANDARD","scriptSrc","base64Options","encode","setItem","decode","askOnChange","acceptRequiredOnlyButton","rejectAllButton"],"mappings":"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"}