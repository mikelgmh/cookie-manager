!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e||self).cookieManager={})}(this,function(e){var t,n=/*#__PURE__*/function(){function e(){}return e.encode=function(e){return window.btoa(e)},e.decode=function(e){return window.atob(e)},e.isHTML=function(e){var t=RegExp.prototype.test.bind(/(<([^>]+)>)/i);return e.match(t)},e.wrapString=function(e,t){return"<"+t+">"+e+"</"+t+">"},e.deepEqual=function(e,t){var n=this,o=Object.keys,i=typeof e;return e&&t&&"object"===i&&i===typeof t?o(e).length===o(t).length&&o(e).every(function(o){return n.deepEqual(e[o],t[o])}):e===t},e.compareObjects=function(e,t){var n=function e(t){return Object.entries(t).sort().map(function(t){return t[1]instanceof Object&&(t[1]=e(t[1])),t})};return JSON.stringify(n(e))===JSON.stringify(n(t))},e.objectEquals=function(e,t){var n=function(e){var t={};return JSON.stringify(e,function(e,n){return t[e]=null,n}),JSON.stringify(e,Object.keys(t).sort())};return n(e)===n(t)},e.prepareObjectsForComparison=function(e,t){var n=JSON.parse(JSON.stringify(e)),o=JSON.parse(JSON.stringify(t));return n.forEach(function(e){e.checked=!0}),o.forEach(function(e){e.checked=!0}),{A:n,B:o}},e.mergeRecursively=function(e,t){for(var n in t)try{e[n]=t[n].constructor==Object?this.mergeRecursively(e[n],t[n]):t[n]}catch(o){e[n]=t[n]}return e},e}(),o=/*#__PURE__*/function(){function e(e,t){this.options=void 0,this.banner=void 0,this.cookiesManager=void 0,this.cookiesManager=e,this.options=t,this.injectBanner(),this.setEventListeners()}var t=e.prototype;return t.setEventListeners=function(){var e=this;document.querySelector(".banner-container__accept-all-btn").addEventListener("click",function(){e.cookiesManager.acceptAllButton()}),document.querySelector(".banner-container__config-btn").addEventListener("click",function(){e.cookiesManager.showModal()})},t.generateBanner=function(){return'\n                <div class="c-cookies-config-banner">\n            <div class="banner-container">\n            '+this.getBannerText()+'\n            <div class="banner-container__buttons">\n                <button class="banner-container__button banner-container__accept-all-btn">'+this.getAcceptAllButtonText()+'</button>\n                <button class="banner-container__button-link banner-container__config-btn">Configurar</button>\n            </div>\n            </div>\n        </div> \n        '},t.getBannerText=function(){return null!=this.options.bannerText?n.isHTML(this.options.bannerText)?this.options.bannerText:n.wrapString(this.options.bannerText,"p"):'\n                <p>Utilizamos cookies propias y de terceros para analizar el tráfico en nuestra web mediante la obtención de los\n                        datos necesarios para estudiar tu navegación. Puedes obtener más información en la Política de Cookies. Puedes\n                        aceptar todas las cookies pulsando el botón “Aceptar" o configurarlas o rechazar su uso pulsando en\n                        "Configurar".</p>\n                '},t.getAcceptAllButtonText=function(){return null!=this.options.acceptAllButton.text?this.options.acceptAllButton.text:"Aceptar todo"},t.injectBanner=function(){null!=document.querySelector("body")&&document.querySelector("body").insertAdjacentHTML("afterend",this.generateBanner())},t.showWall=function(){var e='<div class="c-cookies-config-wall '+(this.options.wallBlur?"c-cookies-config-wall--blurred":"")+'"></div>';document.querySelector("body").insertAdjacentHTML("afterend",e)},t.hideWall=function(){document.querySelector(".c-cookies-config-wall").style.display="none"},t.hideScroll=function(){document.querySelector("body").style.overflow="hidden"},t.showScroll=function(){document.querySelector("body").style.overflow="auto"},t.show=function(){this.options.wall&&this.showWall(),this.options.wallScroll||this.hideScroll(),document.querySelector(".c-cookies-config-banner .banner-container").classList.add("show-banner")},t.hide=function(){document.querySelector(".c-cookies-config-banner").style.display="none",this.hideWall(),this.showScroll()},e}(),i=/*#__PURE__*/function(){function e(e,t){this.options=void 0,this.cookiesManager=void 0,this.cookiesManager=e,this.options=t,this.injectModal(),this.setEventListeners()}var t=e.prototype;return t.show=function(){document.getElementById("modal-container").classList.add("show-modal"),document.querySelector("body").style.overflow="hidden"},t.hide=function(){document.getElementById("modal-container").classList.remove("show-modal")},t.setEventListeners=function(){var e=this,t=this;document.querySelectorAll(".close-modal").forEach(function(t){return t.addEventListener("click",e.hide)}),document.querySelectorAll(".modal__button-accept-all").forEach(function(e){e.addEventListener("click",function(){t.cookiesManager.acceptAllButton()})}),document.querySelectorAll(".modal__button-save-btn").forEach(function(e){e.addEventListener("click",function(){t.cookiesManager.injectScripts(),t.cookiesManager.hideBanner(),t.cookiesManager.saveButton()})}),this.cookiesManager.getOptions().cookieCategories.forEach(function(e,t){document.querySelector(".cm-switch-"+t).addEventListener("change",function(){e.checked=!!this.checked})})},t.injectModal=function(){null!=document.querySelector("body")&&document.querySelector("body").insertAdjacentHTML("afterend",this.generateModal())},t.generateCategoriesBlocks=function(){var e="";return this.cookiesManager.getOptions().cookieCategories.forEach(function(t,n){var o=t.required?"disabled":"";e+='\n            <div class="cookie-category">\n                <div class="cookie-category__header header">\n                    <h2 class="header__title">\n                    '+t.title+'\n                    </h2>\n                    <div class="header__switch">\n                    <label class="switch '+o+'">\n                        <input '+o+' checked class="cm-switch-'+n+'" type="checkbox">\n                        <span class="slider round"></span>\n                    </label>\n                    </div>\n                </div>\n            <div class="cookie-category__body body">\n                <p>'+t.description+"</p>\n            </div>\n            </div>\n            "}),e},t.generateModal=function(){return'\n        <div class="c-cookies-config-modal">\n        <div class="modal__container" id="modal-container">\n          <div class="modal__content">\n            <div class="modal__close close-modal" title="Close">\n            <div class="close-modal-img"></div>\n            </div>\n        \n            <h1 class="modal__title">Configuración de cookies</h1>\n            <p class="modal__description">Configura aquí tus cookies.</p>\n            <div class="modal__cookie-categories">\n                '+this.generateCategoriesBlocks()+'\n            </div>\n    \n            <div class="modal__footer">\n              <button class="modal__button modal__button-width modal__button-accept-all">\n                Aceptar todas\n              </button>\n    \n              <button class="modal__button-link close-modal modal__button-save-btn">\n                Guardar\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n        '},e}(),a=/*#__PURE__*/function(){var t=a.prototype;function a(e){if(this.modalOptions=void 0,this.banner=void 0,this.modal=void 0,this.acceptAll=!1,this.configChanged=!1,null==e)throw new Error("Options cannot be null");if(e.cookieCategories.forEach(function(e){e.checked=!0}),e=n.mergeRecursively(this.getDefaults(),e),this.modalOptions=e,null!=localStorage.getItem("cookiesManagerOptions")){var t=n.prepareObjectsForComparison(this.modalOptions.cookieCategories,this.getCookiesOptions());n.objectEquals(t.A,t.B)?(this.modalOptions.cookieCategories=this.getCookiesOptions(),this.injectScripts()):this.configChanged=!0}null!=e.modalOptions&&this.createModal(e.modalOptions),null!=e.bannerOptions&&this.createBanner(e.bannerOptions)}return t.getBanner=function(){return this.banner},t.setBanner=function(e){this.banner=e},t.getModal=function(){return this.modal},t.setModal=function(e){this.modal=e},t.getOptions=function(){return this.modalOptions},t.createBanner=function(e){return this.banner=new o(this,e),this.banner},t.createModal=function(e){return this.modal=new i(this,e),this.modal},t.acceptAllButton=function(){this.acceptAll=!0,this.modal.hide(),this.banner.hide(),this.injectScripts(),this.saveCookieOptions()},t.showModal=function(){this.modal.show()},t.showBanner=function(){this.banner.show()},t.hideBanner=function(){this.banner.hide()},t.hideModal=function(){this.modal.hide()},t.injectScript=function(e,t){var n=document.createElement("script");n.setAttribute("src",e),n.async=t,document.body.appendChild(n)},t.injectGTM=function(e){try{!function(e,t,n,o,i){e[o]=e[o]||[],e[o].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var a=t.getElementsByTagName(n)[0],c=t.createElement(n);c.src="https://www.googletagmanager.com/gtm.js?id="+i,a.parentNode.insertBefore(c,a)}(window,document,"script","dataLayer",e),window.dataLayer=window.dataLayer||[]}catch(e){console.log("There was an error loading GTM.")}},t.init=function(e,t){this.modalOptions.askOnce?(null==localStorage.getItem("cookiesManagerOptions")||this.modalOptions.askOnChange&&this.configChanged)&&(e&&this.showBanner(),t&&this.showModal()):(e&&this.showBanner(),t&&this.showModal())},t.injectScripts=function(){var t=this;this.modalOptions.cookieCategories.forEach(function(n){(n.checked||t.acceptAll)&&n.scripts.forEach(function(n){n.type==e.ScriptType.STANDARD||null==n.type?t.injectScript(n.scriptSrc,n.async):t.injectGTM(n.gtmCode)})})},t.saveButton=function(){this.saveCookieOptions()},t.saveCookieOptions=function(){var e=n.encode(JSON.stringify(this.modalOptions.cookieCategories));localStorage.setItem("cookiesManagerOptions",e)},t.getCookiesOptions=function(){return JSON.parse(n.decode(localStorage.getItem("cookiesManagerOptions")))},t.getDefaults=function(){return{askOnce:!0,askOnChange:!0,modalOptions:{acceptAllButton:{text:"Accept all",show:!0},saveButton:{text:"Settings",show:!0},closeButton:{text:"Settings",show:!0}},bannerOptions:{wall:!0,wallScroll:!1,wallBlur:!0,bannerText:"This website uses cookies to ensure you get the best experience on our website.",acceptAllButton:{text:"Accept all",show:!0},settingsButton:{text:"Configuración",show:!0},acceptRequiredOnlyButton:{text:"Configuración",show:!1},rejectAllButton:{text:"Configuración",show:!1}},cookieCategories:[]}},a}();e.ScriptType=void 0,(t=e.ScriptType||(e.ScriptType={}))[t.GTM=0]="GTM",t[t.STANDARD=1]="STANDARD",e.CookiesManager=a});
//# sourceMappingURL=index.umd.js.map
