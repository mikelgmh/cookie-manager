{"code":"import { Utils } from \"./utils\";\r\nexport class Banner {\r\n    options;\r\n    banner;\r\n    cookiesManager;\r\n    constructor(cookiesManager, options) {\r\n        this.cookiesManager = cookiesManager;\r\n        this.options = options;\r\n        console.log(\"Setting options:\");\r\n        console.log(options);\r\n        this.injectBanner();\r\n        this.setEventListeners();\r\n    }\r\n    setEventListeners() {\r\n        let self = this;\r\n        // Accept all button\r\n        document.querySelector(\".banner-container__accept-all-btn\").addEventListener(\"click\", function () {\r\n            self.cookiesManager.acceptAllButton();\r\n        });\r\n        // Config button\r\n        document.querySelector(\".banner-container__config-btn\").addEventListener(\"click\", function () {\r\n            self.options.settingsButton.modal.show();\r\n        });\r\n    }\r\n    generateBanner() {\r\n        return `\n                <div class=\"c-cookies-config-banner\">\n            <div class=\"banner-container\">\n            ${this.getBannerText()}\n            <div class=\"banner-container__buttons\">\n                <button class=\"banner-container__button banner-container__accept-all-btn\">${this.getAcceptAllButtonText()}</button>\n                <button class=\"banner-container__button-link banner-container__config-btn\">Configurar</button>\n            </div>\n            </div>\n        </div> \n        `;\r\n    }\r\n    getBannerText() {\r\n        if (this.options.bannerText != undefined) {\r\n            if (Utils.isHTML(this.options.bannerText)) {\r\n                return this.options.bannerText;\r\n            }\r\n            // Else return wrapped\r\n            return Utils.wrapString(this.options.bannerText, \"p\");\r\n        }\r\n        return `\n                <p>Utilizamos cookies propias y de terceros para analizar el tráfico en nuestra web mediante la obtención de los\n                        datos necesarios para estudiar tu navegación. Puedes obtener más información en la Política de Cookies. Puedes\n                        aceptar todas las cookies pulsando el botón “Aceptar\" o configurarlas o rechazar su uso pulsando en\n                        \"Configurar\".</p>\n                `;\r\n    }\r\n    getAcceptAllButtonText() {\r\n        console.log(\"Get banner text\");\r\n        if (this.options.acceptAllButton.text != undefined) {\r\n            // Else return wrapped\r\n            return this.options.acceptAllButton.text;\r\n        }\r\n        return `Aceptar todo`;\r\n    }\r\n    injectBanner() {\r\n        if (document.querySelector(\"body\") != null) {\r\n            document.querySelector(\"body\").insertAdjacentHTML(\"afterend\", this.generateBanner());\r\n        }\r\n    }\r\n    showWall() {\r\n        const wall = '<div class=\"c-cookies-config-wall\"></div>';\r\n        document.querySelector(\"body\").insertAdjacentHTML(\"afterend\", wall);\r\n    }\r\n    hideWall() {\r\n        const test = document.querySelector(\".c-cookies-config-wall\");\r\n        test.style.display = \"none\";\r\n    }\r\n    hideScroll() {\r\n        document.querySelector(\"body\").style.overflow = \"hidden\";\r\n    }\r\n    showScroll() {\r\n        document.querySelector(\"body\").style.overflow = \"auto\";\r\n    }\r\n    show() {\r\n        //document.querySelector<HTMLElement>(\".c-cookies-config-banner\")!.style(\"display\", \"blockxº\");\r\n        if (this.options.wall) {\r\n            this.showWall();\r\n        }\r\n        if (!this.options.wallScroll) {\r\n            this.hideScroll();\r\n        }\r\n        const test = document.querySelector(\".c-cookies-config-banner .banner-container\");\r\n        test.classList.add(\"show-banner\");\r\n    }\r\n    hide() {\r\n        const test = document.querySelector(\".c-cookies-config-banner\");\r\n        test.style.display = \"none\";\r\n        this.hideWall();\r\n        this.showScroll();\r\n        // document.querySelector(\".c-cookies-config-banner\")!.style(\"display\", \"none\");\r\n        // Array.from(document.querySelector(\".c-cookies-config-banner\") as unknown as HTMLCollectionOf<HTMLElement>);\r\n    }\r\n}\r\n//# sourceMappingURL=Banner.js.map","references":["/home/mikel/Projects/cookies-banner-micro/src/Modal.ts","/home/mikel/Projects/cookies-banner-micro/src/utils.ts","/home/mikel/Projects/cookies-banner-micro/src/CookiesManager.ts"],"map":"{\"version\":3,\"file\":\"Banner.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../src/Banner.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/home/mikel/Projects/cookies-banner-micro/dist/Banner.d.ts","writeByteOrderMark":false,"text":"import { Modal } from \"./Modal\";\r\nimport { CookiesManager } from './CookiesManager';\r\nexport declare class Banner {\r\n    private options;\r\n    private banner;\r\n    private cookiesManager;\r\n    constructor(cookiesManager: CookiesManager, options: BannerOptions);\r\n    private setEventListeners;\r\n    private generateBanner;\r\n    private getBannerText;\r\n    private getAcceptAllButtonText;\r\n    injectBanner(): void;\r\n    showWall(): void;\r\n    hideWall(): void;\r\n    hideScroll(): void;\r\n    showScroll(): void;\r\n    show(): void;\r\n    hide(): void;\r\n}\r\nexport interface BannerOptions {\r\n    bannerText: string;\r\n    wall: boolean;\r\n    wallScroll: boolean;\r\n    acceptAllButton: {\r\n        text: string;\r\n        show: boolean;\r\n    };\r\n    settingsButton: {\r\n        text: string;\r\n        show: boolean;\r\n        modal: Modal;\r\n    };\r\n    acceptRequiredOnlyButton: {\r\n        text: string;\r\n        show: boolean;\r\n    };\r\n    rejectAllButton: {\r\n        text: string;\r\n        show: boolean;\r\n    };\r\n}\r\n"}}
